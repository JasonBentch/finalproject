<!DOCTYPE html>
<html>
<body>
  <div>3/25 VERSION<br>Oseas Kline's Remix Machine! <br>Remix "NSFW" in real time using the faders, mutes, and solos - Press "Play/Stop" or <kbd>Spacebar</kbd> to get started! <kbd>P</kbd> is pause!</div>
  <div>Use <kbd>A</kbd>, <kbd>S</kbd>, <kbd>D</kbd>, and <kbd>F</kbd> to mute tracks!</div>
  <div>Use <kbd>Z</kbd>, <kbd>X</kbd>, <kbd>C</kbd>, and <kbd>V</kbd> to solo tracks!</div>
  <script src="/Users/JasonBentch/node_modules/howler/dist/howler.js"></script>
  <script src="http://www.openjs.com/scripts/events/keyboard_shortcuts/shortcut.js"></script>
  <p>
    <button id="playStop" type="button" onclick="playStop()">Play/Stop</button>
    <button type="button" onclick="pause()">Pause</button>
  </p>
  <p>

  </p>
  <p>
    <input oninput="volumeGroup1()" type="range" min="0" max="100" value="100" id="fader1" step="1" class="vertical" orient="vertical">
    <input oninput="volumeGroup2()" type="range" min="0" max="100" value="100" id="fader2" step="1" class="vertical" orient="vertical">
    <input oninput="volumeGroup3()" type="range" min="0" max="100" value="100" id="fader3" step="1" class="vertical" orient="vertical">
    <input oninput="volumeGroup4()" type="range" min="0" max="100" value="100" id="fader4" step="1" class="vertical" orient="vertical">
  </p>
  <p>
    <button id="muteDrums" type="button" onclick="mutDrums()">Mute Drums</button>
    <button id="muteBass" type="button" onclick="mutBass()">Mute Bass</button>
    <button id="muteSynths" type="button" onclick="mutSynths()">Mute Synths</button>
    <button id="muteVocals" type="button" onclick="mutVocals()">Mute Vocals</button>
  </p>
  <p>
    <button id="soloDrums" type="button" onclick="solDrums()">Solo Drums</button>
    <button id="soloBass" type="button" onclick="solBass()">Solo Bass</button>
    <button id="soloSynths" type="button" onclick="solSynths()">Solo Synths</button>
    <button id="soloVocals" type="button" onclick="solVocals()">Solo Vocals</button>
  </p>

  <script>
    let loadCount = 0,
        loaded = false,
        drumSolo = false,
        bassSolo = false,
        synthsSolo = false,
        vocalsSolo = false;

    let drums = new Howl({
        src: ['https://www.dropbox.com/s/2gbivftt8zlq7he/NSFW_DRUM_STEM.wav?dl=1'],
        preload: true,
        autoplay: false,
        loop: true,
        onload: function() {
          console.log('Drums finished loading!');
          loadCount++;
          loadCheck();
        },
        onloaderror: function() {
          console.log('Error loading drums!');
        }
      });

    let bass = new Howl({
        src: ['https://www.dropbox.com/s/3xf833ettd2gmp7/NSFW_BASS_STEM.wav?dl=1'],
        preload: true,
        autoplay: false,
        loop: true,
        onload: function() {
          console.log('Bass finished loading!');
          loadCount++;
          loadCheck();
        },
        onloaderror: function() {
          console.log('Error loading bass!');
        }
      });

    let synths = new Howl({
        src: ['https://www.dropbox.com/s/3xklfkd8arpsyzk/NSFW_SYNTH_STEM.wav?dl=1'],
        preload: true,
        autoplay: false,
        loop: true,
        onload: function() {
          console.log('Synths finished loading!');
          loadCount++;
          loadCheck();
        },
        onloaderror: function() {
          console.log('Error loading synths!');
        }
      });

    let vocals = new Howl({
        src: ['https://www.dropbox.com/s/7x3c4w90pvz6h5h/NSFW_VOCAL_STEM.wav?dl=1'],
        preload: true,
        autoplay: false,
        loop: true,
        onload: function() {
          console.log('Vocals finished loading!');
          loadCount++;
          loadCheck();
        },
        onloaderror: function() {
          console.log('Error loading vocals!');
        }
      });

    document.getElementById("fader1").value = 100;
    document.getElementById("fader2").value = 100;
    document.getElementById("fader3").value = 100;
    document.getElementById("fader4").value = 100;

    function loadCheck() {
      if (loadCount >= 4) {
        loaded = true;
        console.log("All files loaded!");
      }
    }

    document.getElementById("playStop").onmouseover = function() {
      if (loaded == false) {
        alert("Files have not finished loading!");
      }
    }

    function playStop() {
      if (drums.playing() == true) {
        drums.stop();
        bass.stop();
        synths.stop();
        vocals.stop();
      } else {
        drums.play();
        bass.play();
        synths.play();
        vocals.play();
      }
    }

    function pause() {
      drums.pause();
      bass.pause();
      synths.pause();
      vocals.pause();
    }

    function mutDrums() {
      drums.mute(! drums.mute());
    }

    function mutBass() {
      bass.mute(! bass.mute());
    }

    function mutSynths() {
      synths.mute(! synths.mute());
    }

    function mutVocals() {
      vocals.mute(! vocals.mute());
    }

    function solDrums() {
      if (drumSolo == false) {
        drums.mute(false);
        bass.mute(true);
        synths.mute(true);
        vocals.mute(true);
        drumSolo = true;
      } else {
        drums.mute(false);
        bass.mute(false);
        synths.mute(false);
        vocals.mute(false);
        drumSolo = false;
      }
    }

    function solBass() {
      if (bassSolo == false) {
        drums.mute(true);
        bass.mute(false);
        synths.mute(true);
        vocals.mute(true);
        bassSolo = true;
      } else {
        drums.mute(false);
        bass.mute(false);
        synths.mute(false);
        vocals.mute(false);
        bassSolo = false;
      }
    }

    function solSynths() {
      if (synthsSolo == false) {
        drums.mute(true);
        bass.mute(true);
        synths.mute(false);
        vocals.mute(true);
        synthsSolo = true;
      } else {
        drums.mute(false);
        bass.mute(false);
        synths.mute(false);
        vocals.mute(false);
        synthsSolo = false;
      }
    }

    function solVocals() {
      if (vocalsSolo == false) {
        drums.mute(true);
        bass.mute(true);
        synths.mute(true);
        vocals.mute(false);
        vocalsSolo = true;
      } else {
        drums.mute(false);
        bass.mute(false);
        synths.mute(false);
        vocals.mute(false);
        vocalsSolo = false;
      }
    }



    function volumeGroup1() {
      drums.volume(document.getElementById("fader1").value / 100);
    }

    function volumeGroup2() {
      bass.volume(document.getElementById("fader2").value / 100);
    }

    function volumeGroup3() {
      synths.volume(document.getElementById("fader3").value / 100);
    }

    function volumeGroup4() {
      vocals.volume(document.getElementById("fader4").value / 100);
    }

    shortcut.add("Space", function() {
      if (loaded == false) {
        alert("Files have not finished loading!");
      } else {
        playStop();
      }
    });

    shortcut.add("p", function() {
      pause();
    });

    shortcut.add("a", function() {
      mutDrums();
    });

    shortcut.add("s", function() {
      mutBass();
    });

    shortcut.add("d", function() {
      mutSynths();
    });

    shortcut.add("f", function() {
      mutVocals();
    });

    shortcut.add("z", function() {
      solDrums();
    });

    shortcut.add("x", function() {
      solBass();
    });

    shortcut.add("c", function() {
      solSynths();
    });

    shortcut.add("v", function() {
      solVocals();
    });
  </script>
<style>
input.vertical {
	-webkit-appearance: slider-vertical;
	writing-mode: bt-lr;
}
input.horizontal {
	-webkit-appearance: slider-horizontal;
	writing-mode: bt-lr;
}
kbd {
  border-radius: 3px;
  padding: 1px 2px 0;
  border: 1px solid black;
}
</style>
</body>
</html>
